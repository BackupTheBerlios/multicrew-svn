<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>string_utilities.hpp</title>
<meta http-equiv="generator" content="ccolour C++ colouriser by Andy Rushton">
</head>
<body lang="en">
<h1>string_utilities.hpp</h1>
<pre style="background-color: #ffffff">

<span style="color: #990000">#ifndef</span> <span style="color: #000000">STRING_UTILITIES_HPP</span>
<span style="color: #990000">#define</span> <span style="color: #000000">STRING_UTILITIES_HPP</span>
<span style="color: #000099">/*------------------------------------------------------------------------------</span>
<span style="color: #000099"></span>
<span style="color: #000099">  Author:    Andy Rushton</span>
<span style="color: #000099">  Copyright: (c) Andy Rushton, 2004</span>
<span style="color: #000099">  License:   BSD License, see ../docs/license.html</span>
<span style="color: #000099"></span>
<span style="color: #000099">  Utilities for manipulating std::strings, missing from the STL or C++ libraries</span>
<span style="color: #000099"></span>
<span style="color: #000099">  ------------------------------------------------------------------------------*/</span>
<span style="color: #990000">#include</span> <span style="color: #009900">"os_fixes.hpp"</span>
<span style="color: #990000">#include</span> <span style="color: #009900">&lt;string&gt;</span>
<span style="color: #990000">#include</span> <span style="color: #009900">&lt;vector&gt;</span>
<span style="color: #990000">#include</span> <span style="color: #009900">&lt;bitset&gt;</span>
<span style="color: #990000">#include</span> <span style="color: #009900">&lt;list&gt;</span>
<span style="color: #990000">#include</span> <span style="color: #009900">&lt;map&gt;</span>
<span style="color: #990000">#include</span> <span style="color: #009900">&lt;set&gt;</span>
<span style="color: #990000">#include</span> <span style="color: #009900">&lt;vector&gt;</span>
<span style="color: #990000">#include</span> <span style="color: #009900">&lt;stdexcept&gt;</span>
<span style="color: #990000">class</span> <span style="color: #000000">otext</span><span style="color: #330033">;</span>

<span style="color: #000099">////////////////////////////////////////////////////////////////////////////////</span>
<span style="color: #000099">// Conversions of Integer types to string</span>
<span style="color: #000099">////////////////////////////////////////////////////////////////////////////////</span>

<span style="color: #000099">// The radix (i.e. base) for these conversions can be any value from base 2 to base 36</span>
<span style="color: #000099">// specifying any other radix causes std::invalid_argument to be thrown</span>

<span style="color: #000099">// Radix display representations:</span>
<span style="color: #000099">//   There are three ways in which the radix is represented:</span>
<span style="color: #000099">//     - none - the number is just printed as a number (e.g. 12345). Can be confusing for non-decimal radix</span>
<span style="color: #000099">//     - C style - for binary, octal and hex, the C-style prefices 0b, 0 and 0x are used - note that this is an unsigned representation</span>
<span style="color: #000099">//     - Hash style - in the form radix#value - the value may be signed, e.g. 10#-9</span>
<span style="color: #000099">// If any other value is used, std::invalid_argument is thrown</span>

<span style="color: #990000">enum</span> <span style="color: #000000">radix_display_t</span>
<span style="color: #330033">{</span>
  <span style="color: #000000">radix_none</span><span style="color: #330033">,</span>               <span style="color: #000099">// just print the number with no radix indicated</span>
  <span style="color: #000000">radix_hash_style</span><span style="color: #330033">,</span>         <span style="color: #000099">// none for decimal, hash style for all others</span>
  <span style="color: #000000">radix_hash_style_all</span><span style="color: #330033">,</span>     <span style="color: #000099">// hash style for all radices including decimal</span>
  <span style="color: #000000">radix_c_style</span><span style="color: #330033">,</span>            <span style="color: #000099">// C style for hex and octal, none for others</span>
  <span style="color: #000000">radix_c_style_or_hash</span>     <span style="color: #000099">// C style for hex and octal, none for decimal, hash style for others</span>
<span style="color: #330033">}</span><span style="color: #330033">;</span>

<span style="color: #000099">// The width argument specifies the number of numerical digits to use in the result</span>
<span style="color: #000099">// This is a minimum - if the value requires more digits then it will be wider than the width argument</span>
<span style="color: #000099">// However, if it is smaller, then it will be extended to the specified width</span>
<span style="color: #000099">// Then, the radix display prefix is added to this width</span>
<span style="color: #000099">// For example, using the hash representation of 0 in hex with width=4 gives: 16#0000 - so there's 4 digits in the number part</span>

<span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">string</span> <span style="color: #000000">to_string</span><span style="color: #330033">(</span><span style="color: #990000">bool</span> <span style="color: #000000">i</span><span style="color: #330033">,</span>           <span style="color: #990000">unsigned</span> <span style="color: #000000">radix</span> <span style="color: #330033">=</span> <span style="color: #993399">10</span><span style="color: #330033">,</span> <span style="color: #000000">radix_display_t</span> <span style="color: #000000">display</span> <span style="color: #330033">=</span> <span style="color: #000000">radix_c_style_or_hash</span><span style="color: #330033">,</span> <span style="color: #990000">unsigned</span> <span style="color: #000000">width</span> <span style="color: #330033">=</span> <span style="color: #993399">0</span><span style="color: #330033">)</span>
  <span style="color: #990000">throw</span><span style="color: #330033">(</span><span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">invalid_argument</span><span style="color: #330033">)</span><span style="color: #330033">;</span>

<span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">string</span> <span style="color: #000000">to_string</span><span style="color: #330033">(</span><span style="color: #990000">short</span> <span style="color: #000000">i</span><span style="color: #330033">,</span>          <span style="color: #990000">unsigned</span> <span style="color: #000000">radix</span> <span style="color: #330033">=</span> <span style="color: #993399">10</span><span style="color: #330033">,</span> <span style="color: #000000">radix_display_t</span> <span style="color: #000000">display</span> <span style="color: #330033">=</span> <span style="color: #000000">radix_c_style_or_hash</span><span style="color: #330033">,</span> <span style="color: #990000">unsigned</span> <span style="color: #000000">width</span> <span style="color: #330033">=</span> <span style="color: #993399">0</span><span style="color: #330033">)</span>
  <span style="color: #990000">throw</span><span style="color: #330033">(</span><span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">invalid_argument</span><span style="color: #330033">)</span><span style="color: #330033">;</span>

<span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">string</span> <span style="color: #000000">to_string</span><span style="color: #330033">(</span><span style="color: #990000">unsigned</span> <span style="color: #990000">short</span> <span style="color: #000000">i</span><span style="color: #330033">,</span> <span style="color: #990000">unsigned</span> <span style="color: #000000">radix</span> <span style="color: #330033">=</span> <span style="color: #993399">10</span><span style="color: #330033">,</span> <span style="color: #000000">radix_display_t</span> <span style="color: #000000">display</span> <span style="color: #330033">=</span> <span style="color: #000000">radix_c_style_or_hash</span><span style="color: #330033">,</span> <span style="color: #990000">unsigned</span> <span style="color: #000000">width</span> <span style="color: #330033">=</span> <span style="color: #993399">0</span><span style="color: #330033">)</span>
  <span style="color: #990000">throw</span><span style="color: #330033">(</span><span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">invalid_argument</span><span style="color: #330033">)</span><span style="color: #330033">;</span>

<span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">string</span> <span style="color: #000000">to_string</span><span style="color: #330033">(</span><span style="color: #990000">int</span> <span style="color: #000000">i</span><span style="color: #330033">,</span>            <span style="color: #990000">unsigned</span> <span style="color: #000000">radix</span> <span style="color: #330033">=</span> <span style="color: #993399">10</span><span style="color: #330033">,</span> <span style="color: #000000">radix_display_t</span> <span style="color: #000000">display</span> <span style="color: #330033">=</span> <span style="color: #000000">radix_c_style_or_hash</span><span style="color: #330033">,</span> <span style="color: #990000">unsigned</span> <span style="color: #000000">width</span> <span style="color: #330033">=</span> <span style="color: #993399">0</span><span style="color: #330033">)</span>
  <span style="color: #990000">throw</span><span style="color: #330033">(</span><span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">invalid_argument</span><span style="color: #330033">)</span><span style="color: #330033">;</span>

<span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">string</span> <span style="color: #000000">to_string</span><span style="color: #330033">(</span><span style="color: #990000">unsigned</span> <span style="color: #990000">int</span> <span style="color: #000000">i</span><span style="color: #330033">,</span>   <span style="color: #990000">unsigned</span> <span style="color: #000000">radix</span> <span style="color: #330033">=</span> <span style="color: #993399">10</span><span style="color: #330033">,</span> <span style="color: #000000">radix_display_t</span> <span style="color: #000000">display</span> <span style="color: #330033">=</span> <span style="color: #000000">radix_c_style_or_hash</span><span style="color: #330033">,</span> <span style="color: #990000">unsigned</span> <span style="color: #000000">width</span> <span style="color: #330033">=</span> <span style="color: #993399">0</span><span style="color: #330033">)</span>
  <span style="color: #990000">throw</span><span style="color: #330033">(</span><span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">invalid_argument</span><span style="color: #330033">)</span><span style="color: #330033">;</span>

<span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">string</span> <span style="color: #000000">to_string</span><span style="color: #330033">(</span><span style="color: #990000">long</span> <span style="color: #000000">i</span><span style="color: #330033">,</span>           <span style="color: #990000">unsigned</span> <span style="color: #000000">radix</span> <span style="color: #330033">=</span> <span style="color: #993399">10</span><span style="color: #330033">,</span> <span style="color: #000000">radix_display_t</span> <span style="color: #000000">display</span> <span style="color: #330033">=</span> <span style="color: #000000">radix_c_style_or_hash</span><span style="color: #330033">,</span> <span style="color: #990000">unsigned</span> <span style="color: #000000">width</span> <span style="color: #330033">=</span> <span style="color: #993399">0</span><span style="color: #330033">)</span>
  <span style="color: #990000">throw</span><span style="color: #330033">(</span><span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">invalid_argument</span><span style="color: #330033">)</span><span style="color: #330033">;</span>

<span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">string</span> <span style="color: #000000">to_string</span><span style="color: #330033">(</span><span style="color: #990000">unsigned</span> <span style="color: #990000">long</span> <span style="color: #000000">i</span><span style="color: #330033">,</span>  <span style="color: #990000">unsigned</span> <span style="color: #000000">radix</span> <span style="color: #330033">=</span> <span style="color: #993399">10</span><span style="color: #330033">,</span> <span style="color: #000000">radix_display_t</span> <span style="color: #000000">display</span> <span style="color: #330033">=</span> <span style="color: #000000">radix_c_style_or_hash</span><span style="color: #330033">,</span> <span style="color: #990000">unsigned</span> <span style="color: #000000">width</span> <span style="color: #330033">=</span> <span style="color: #993399">0</span><span style="color: #330033">)</span>
  <span style="color: #990000">throw</span><span style="color: #330033">(</span><span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">invalid_argument</span><span style="color: #330033">)</span><span style="color: #330033">;</span>

<span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">string</span> <span style="color: #000000">to_string</span><span style="color: #330033">(</span><span style="color: #990000">const</span> <span style="color: #990000">void</span><span style="color: #330033">*</span><span style="color: #330033">,</span>      <span style="color: #990000">unsigned</span> <span style="color: #000000">radix</span> <span style="color: #330033">=</span> <span style="color: #993399">16</span><span style="color: #330033">,</span> <span style="color: #000000">radix_display_t</span> <span style="color: #000000">display</span> <span style="color: #330033">=</span> <span style="color: #000000">radix_c_style_or_hash</span><span style="color: #330033">,</span> <span style="color: #990000">unsigned</span> <span style="color: #000000">width</span> <span style="color: #330033">=</span> <span style="color: #993399">0</span><span style="color: #330033">)</span>
  <span style="color: #990000">throw</span><span style="color: #330033">(</span><span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">invalid_argument</span><span style="color: #330033">)</span><span style="color: #330033">;</span>

<span style="color: #000099">////////////////////////////////////////////////////////////////////////////////</span>
<span style="color: #000099">// convert a real type to string</span>
<span style="color: #000099">////////////////////////////////////////////////////////////////////////////////</span>

<span style="color: #000099">// Only decimal radix is supported</span>
<span style="color: #000099">// There are three formats for the printout:</span>
<span style="color: #000099">//   - fixed - formatted as a fixed-point number, so no mantissa is printed (equivalent to %f in printf)</span>
<span style="color: #000099">//   - floating - formatted as a normalised floating-point number (equivalent to %e in printf)</span>
<span style="color: #000099">//   - mixed - formatted as fixed-point if this is appropriate, otherwise the floating format (equivalent to %g in printf)</span>
<span style="color: #000099">// Using any other value for the display type causes std::invalid_argument to be thrown</span>

<span style="color: #990000">enum</span> <span style="color: #000000">real_display_t</span>
<span style="color: #330033">{</span>
  <span style="color: #000000">display_fixed</span><span style="color: #330033">,</span>    <span style="color: #000099">// %f</span>
  <span style="color: #000000">display_floating</span><span style="color: #330033">,</span> <span style="color: #000099">// %e</span>
  <span style="color: #000000">display_mixed</span>     <span style="color: #000099">// %g</span>
<span style="color: #330033">}</span><span style="color: #330033">;</span>

<span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">string</span> <span style="color: #000000">to_string</span><span style="color: #330033">(</span><span style="color: #990000">float</span> <span style="color: #000000">f</span><span style="color: #330033">,</span>  <span style="color: #000000">real_display_t</span> <span style="color: #000000">display</span> <span style="color: #330033">=</span> <span style="color: #000000">display_mixed</span><span style="color: #330033">,</span> <span style="color: #990000">unsigned</span> <span style="color: #000000">width</span> <span style="color: #330033">=</span> <span style="color: #993399">0</span><span style="color: #330033">,</span> <span style="color: #990000">unsigned</span> <span style="color: #000000">precision</span> <span style="color: #330033">=</span> <span style="color: #993399">6</span><span style="color: #330033">)</span>
  <span style="color: #990000">throw</span><span style="color: #330033">(</span><span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">invalid_argument</span><span style="color: #330033">)</span><span style="color: #330033">;</span>
<span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">string</span> <span style="color: #000000">to_string</span><span style="color: #330033">(</span><span style="color: #990000">double</span> <span style="color: #000000">f</span><span style="color: #330033">,</span> <span style="color: #000000">real_display_t</span> <span style="color: #000000">display</span> <span style="color: #330033">=</span> <span style="color: #000000">display_mixed</span><span style="color: #330033">,</span> <span style="color: #990000">unsigned</span> <span style="color: #000000">width</span> <span style="color: #330033">=</span> <span style="color: #993399">0</span><span style="color: #330033">,</span> <span style="color: #990000">unsigned</span> <span style="color: #000000">precision</span> <span style="color: #330033">=</span> <span style="color: #993399">6</span><span style="color: #330033">)</span>
  <span style="color: #990000">throw</span><span style="color: #330033">(</span><span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">invalid_argument</span><span style="color: #330033">)</span><span style="color: #330033">;</span>

<span style="color: #000099">////////////////////////////////////////////////////////////////////////////////</span>
<span style="color: #000099">// Convert a string to string</span>
<span style="color: #000099">////////////////////////////////////////////////////////////////////////////////</span>

<span style="color: #000099">// this is necessary for completeness, e.g. for use in vector_to_string for vector&lt;string&gt;</span>
<span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">string</span> <span style="color: #000000">to_string</span><span style="color: #330033">(</span><span style="color: #990000">const</span> <span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">string</span><span style="color: #330033">&amp;</span> <span style="color: #000000">value</span><span style="color: #330033">)</span><span style="color: #330033">;</span>

<span style="color: #000099">// ditto for char*</span>
<span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">string</span> <span style="color: #000000">to_string</span><span style="color: #330033">(</span><span style="color: #990000">const</span> <span style="color: #990000">char</span><span style="color: #330033">*</span> <span style="color: #000000">value</span><span style="color: #330033">)</span><span style="color: #330033">;</span>

<span style="color: #000099">////////////////////////////////////////////////////////////////////////////////</span>
<span style="color: #000099">// convert a string to a simple type</span>
<span style="color: #000099">////////////////////////////////////////////////////////////////////////////////</span>

<span style="color: #000099">// Convert a string to an integer type</span>
<span style="color: #000099">// supports all the formats described above for the reverse conversion</span>
<span style="color: #000099">// If the radix is set to zero, the conversions deduce the radix from the string representation</span>
<span style="color: #000099">// So, 0b prefix is binary, 0 prefix is octal, 0x is hex and &lt;base&gt;# prefix is my hash format</span>
<span style="color: #000099">// A non-zero radix should be used when the string value has no radix information and is non-decimal</span>
<span style="color: #000099">// e.g. the hex value FEDCBA has no indication that it is hex, so specify radix 16</span>
<span style="color: #000099">// The radix must be either zero as explained above, or in the range 2 to 16</span>
<span style="color: #000099">// Any other value will cause std::invalid_argument to be thrown</span>

<span style="color: #990000">bool</span> <span style="color: #000000">to_bool</span><span style="color: #330033">(</span><span style="color: #990000">const</span> <span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">string</span><span style="color: #330033">&amp;</span> <span style="color: #000000">value</span><span style="color: #330033">,</span> <span style="color: #990000">unsigned</span> <span style="color: #000000">radix</span> <span style="color: #330033">=</span> <span style="color: #993399">0</span><span style="color: #330033">)</span>
  <span style="color: #990000">throw</span><span style="color: #330033">(</span><span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">invalid_argument</span><span style="color: #330033">)</span><span style="color: #330033">;</span>

<span style="color: #990000">short</span> <span style="color: #000000">to_short</span><span style="color: #330033">(</span><span style="color: #990000">const</span> <span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">string</span><span style="color: #330033">&amp;</span> <span style="color: #000000">value</span><span style="color: #330033">,</span> <span style="color: #990000">unsigned</span> <span style="color: #000000">radix</span> <span style="color: #330033">=</span> <span style="color: #993399">0</span><span style="color: #330033">)</span>
  <span style="color: #990000">throw</span><span style="color: #330033">(</span><span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">invalid_argument</span><span style="color: #330033">)</span><span style="color: #330033">;</span>

<span style="color: #990000">unsigned</span> <span style="color: #990000">short</span> <span style="color: #000000">to_ushort</span><span style="color: #330033">(</span><span style="color: #990000">const</span> <span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">string</span><span style="color: #330033">&amp;</span> <span style="color: #000000">value</span><span style="color: #330033">,</span> <span style="color: #990000">unsigned</span> <span style="color: #000000">radix</span> <span style="color: #330033">=</span> <span style="color: #993399">0</span><span style="color: #330033">)</span>
  <span style="color: #990000">throw</span><span style="color: #330033">(</span><span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">invalid_argument</span><span style="color: #330033">)</span><span style="color: #330033">;</span>

<span style="color: #990000">int</span> <span style="color: #000000">to_int</span><span style="color: #330033">(</span><span style="color: #990000">const</span> <span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">string</span><span style="color: #330033">&amp;</span> <span style="color: #000000">value</span><span style="color: #330033">,</span> <span style="color: #990000">unsigned</span> <span style="color: #000000">radix</span> <span style="color: #330033">=</span> <span style="color: #993399">0</span><span style="color: #330033">)</span>
  <span style="color: #990000">throw</span><span style="color: #330033">(</span><span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">invalid_argument</span><span style="color: #330033">)</span><span style="color: #330033">;</span>

<span style="color: #990000">unsigned</span> <span style="color: #990000">int</span> <span style="color: #000000">to_uint</span><span style="color: #330033">(</span><span style="color: #990000">const</span> <span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">string</span><span style="color: #330033">&amp;</span> <span style="color: #000000">value</span><span style="color: #330033">,</span> <span style="color: #990000">unsigned</span> <span style="color: #000000">radix</span> <span style="color: #330033">=</span> <span style="color: #993399">0</span><span style="color: #330033">)</span>
  <span style="color: #990000">throw</span><span style="color: #330033">(</span><span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">invalid_argument</span><span style="color: #330033">)</span><span style="color: #330033">;</span>

<span style="color: #990000">long</span> <span style="color: #000000">to_long</span><span style="color: #330033">(</span><span style="color: #990000">const</span> <span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">string</span><span style="color: #330033">&amp;</span> <span style="color: #000000">value</span><span style="color: #330033">,</span> <span style="color: #990000">unsigned</span> <span style="color: #000000">radix</span> <span style="color: #330033">=</span> <span style="color: #993399">0</span><span style="color: #330033">)</span>
  <span style="color: #990000">throw</span><span style="color: #330033">(</span><span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">invalid_argument</span><span style="color: #330033">)</span><span style="color: #330033">;</span>

<span style="color: #990000">unsigned</span> <span style="color: #990000">long</span> <span style="color: #000000">to_ulong</span><span style="color: #330033">(</span><span style="color: #990000">const</span> <span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">string</span><span style="color: #330033">&amp;</span> <span style="color: #000000">value</span><span style="color: #330033">,</span> <span style="color: #990000">unsigned</span> <span style="color: #000000">radix</span> <span style="color: #330033">=</span> <span style="color: #993399">0</span><span style="color: #330033">)</span>
  <span style="color: #990000">throw</span><span style="color: #330033">(</span><span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">invalid_argument</span><span style="color: #330033">)</span><span style="color: #330033">;</span>

<span style="color: #990000">void</span><span style="color: #330033">*</span> <span style="color: #000000">to_void_star</span><span style="color: #330033">(</span><span style="color: #990000">const</span> <span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">string</span><span style="color: #330033">&amp;</span> <span style="color: #000000">value</span><span style="color: #330033">,</span> <span style="color: #990000">unsigned</span> <span style="color: #000000">radix</span> <span style="color: #330033">=</span> <span style="color: #993399">0</span><span style="color: #330033">)</span>
  <span style="color: #990000">throw</span><span style="color: #330033">(</span><span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">invalid_argument</span><span style="color: #330033">)</span><span style="color: #330033">;</span>

<span style="color: #000099">// Convert a floating-point type</span>

<span style="color: #990000">float</span> <span style="color: #000000">to_float</span><span style="color: #330033">(</span><span style="color: #990000">const</span> <span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">string</span><span style="color: #330033">&amp;</span> <span style="color: #000000">value</span><span style="color: #330033">)</span>
  <span style="color: #990000">throw</span><span style="color: #330033">(</span><span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">invalid_argument</span><span style="color: #330033">)</span><span style="color: #330033">;</span>

<span style="color: #990000">double</span> <span style="color: #000000">to_double</span><span style="color: #330033">(</span><span style="color: #990000">const</span> <span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">string</span><span style="color: #330033">&amp;</span> <span style="color: #000000">value</span><span style="color: #330033">)</span>
  <span style="color: #990000">throw</span><span style="color: #330033">(</span><span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">invalid_argument</span><span style="color: #330033">)</span><span style="color: #330033">;</span>

<span style="color: #000099">////////////////////////////////////////////////////////////////////////////////</span>
<span style="color: #000099">// template string conversions for pointers and STL containers</span>
<span style="color: #000099">////////////////////////////////////////////////////////////////////////////////</span>
<span style="color: #000099">// Note: STLplus containers tend to have built-in string conversion functions consistent with these</span>

<span style="color: #990000">template</span> <span style="color: #330033">&lt;</span><span style="color: #990000">typename</span> <span style="color: #000000">T</span><span style="color: #330033">&gt;</span>
<span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">string</span> <span style="color: #000000">pointer_to_string</span><span style="color: #330033">(</span><span style="color: #990000">const</span> <span style="color: #000000">T</span><span style="color: #330033">*</span> <span style="color: #000000">value</span><span style="color: #330033">,</span> <span style="color: #990000">const</span> <span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">string</span><span style="color: #330033">&amp;</span> <span style="color: #000000">null_string</span><span style="color: #330033">,</span> <span style="color: #990000">const</span> <span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">string</span><span style="color: #330033">&amp;</span> <span style="color: #000000">prefix</span><span style="color: #330033">,</span> <span style="color: #990000">const</span> <span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">string</span><span style="color: #330033">&amp;</span> <span style="color: #000000">suffix</span><span style="color: #330033">)</span><span style="color: #330033">;</span>

<span style="color: #990000">template</span><span style="color: #330033">&lt;</span><span style="color: #000000">size_t</span> <span style="color: #000000">N</span><span style="color: #330033">&gt;</span>
<span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">string</span> <span style="color: #000000">bitset_to_string</span><span style="color: #330033">(</span><span style="color: #990000">const</span> <span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">bitset</span><span style="color: #330033">&lt;</span><span style="color: #000000">N</span><span style="color: #330033">&gt;</span><span style="color: #330033">&amp;</span> <span style="color: #000000">data</span><span style="color: #330033">)</span><span style="color: #330033">;</span>

<span style="color: #990000">template</span><span style="color: #330033">&lt;</span><span style="color: #990000">typename</span> <span style="color: #000000">T</span><span style="color: #330033">&gt;</span>
<span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">string</span> <span style="color: #000000">list_to_string</span><span style="color: #330033">(</span><span style="color: #990000">const</span> <span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">list</span><span style="color: #330033">&lt;</span><span style="color: #000000">T</span><span style="color: #330033">&gt;</span><span style="color: #330033">&amp;</span> <span style="color: #000000">values</span><span style="color: #330033">,</span> <span style="color: #990000">const</span> <span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">string</span><span style="color: #330033">&amp;</span> <span style="color: #000000">separator</span><span style="color: #330033">)</span><span style="color: #330033">;</span>

<span style="color: #990000">template</span><span style="color: #330033">&lt;</span><span style="color: #990000">typename</span> <span style="color: #000000">L</span><span style="color: #330033">,</span> <span style="color: #990000">typename</span> <span style="color: #000000">R</span><span style="color: #330033">&gt;</span>
<span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">string</span> <span style="color: #000000">pair_to_string</span><span style="color: #330033">(</span><span style="color: #990000">const</span> <span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">pair</span><span style="color: #330033">&lt;</span><span style="color: #000000">L</span><span style="color: #330033">,</span><span style="color: #000000">R</span><span style="color: #330033">&gt;</span><span style="color: #330033">&amp;</span> <span style="color: #000000">values</span><span style="color: #330033">,</span> <span style="color: #990000">const</span> <span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">string</span><span style="color: #330033">&amp;</span> <span style="color: #000000">separator</span><span style="color: #330033">)</span><span style="color: #330033">;</span>

<span style="color: #990000">template</span><span style="color: #330033">&lt;</span><span style="color: #990000">typename</span> <span style="color: #000000">K</span><span style="color: #330033">,</span> <span style="color: #990000">typename</span> <span style="color: #000000">T</span><span style="color: #330033">,</span> <span style="color: #990000">typename</span> <span style="color: #000000">P</span><span style="color: #330033">&gt;</span>
<span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">string</span> <span style="color: #000000">map_to_string</span><span style="color: #330033">(</span><span style="color: #990000">const</span> <span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">map</span><span style="color: #330033">&lt;</span><span style="color: #000000">K</span><span style="color: #330033">,</span><span style="color: #000000">T</span><span style="color: #330033">,</span><span style="color: #000000">P</span><span style="color: #330033">&gt;</span><span style="color: #330033">&amp;</span> <span style="color: #000000">values</span><span style="color: #330033">,</span> <span style="color: #990000">const</span> <span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">string</span><span style="color: #330033">&amp;</span> <span style="color: #000000">pair_separator</span><span style="color: #330033">,</span> <span style="color: #990000">const</span> <span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">string</span><span style="color: #330033">&amp;</span> <span style="color: #000000">separator</span><span style="color: #330033">)</span><span style="color: #330033">;</span>

<span style="color: #990000">template</span><span style="color: #330033">&lt;</span><span style="color: #990000">typename</span> <span style="color: #000000">K</span><span style="color: #330033">,</span> <span style="color: #990000">typename</span> <span style="color: #000000">T</span><span style="color: #330033">,</span> <span style="color: #990000">typename</span> <span style="color: #000000">P</span><span style="color: #330033">&gt;</span>
<span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">string</span> <span style="color: #000000">multimap_to_string</span><span style="color: #330033">(</span><span style="color: #990000">const</span> <span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">multimap</span><span style="color: #330033">&lt;</span><span style="color: #000000">K</span><span style="color: #330033">,</span><span style="color: #000000">T</span><span style="color: #330033">,</span><span style="color: #000000">P</span><span style="color: #330033">&gt;</span><span style="color: #330033">&amp;</span> <span style="color: #000000">values</span><span style="color: #330033">,</span> <span style="color: #990000">const</span> <span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">string</span><span style="color: #330033">&amp;</span> <span style="color: #000000">pair_separator</span><span style="color: #330033">,</span> <span style="color: #990000">const</span> <span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">string</span><span style="color: #330033">&amp;</span> <span style="color: #000000">separator</span><span style="color: #330033">)</span><span style="color: #330033">;</span>

<span style="color: #990000">template</span><span style="color: #330033">&lt;</span><span style="color: #990000">typename</span> <span style="color: #000000">K</span><span style="color: #330033">,</span> <span style="color: #990000">typename</span> <span style="color: #000000">P</span><span style="color: #330033">&gt;</span>
<span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">string</span> <span style="color: #000000">set_to_string</span><span style="color: #330033">(</span><span style="color: #990000">const</span> <span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">set</span><span style="color: #330033">&lt;</span><span style="color: #000000">K</span><span style="color: #330033">,</span><span style="color: #000000">P</span><span style="color: #330033">&gt;</span><span style="color: #330033">&amp;</span> <span style="color: #000000">values</span><span style="color: #330033">,</span> <span style="color: #990000">const</span> <span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">string</span><span style="color: #330033">&amp;</span> <span style="color: #000000">separator</span><span style="color: #330033">)</span><span style="color: #330033">;</span>

<span style="color: #990000">template</span><span style="color: #330033">&lt;</span><span style="color: #990000">typename</span> <span style="color: #000000">K</span><span style="color: #330033">,</span> <span style="color: #990000">typename</span> <span style="color: #000000">P</span><span style="color: #330033">&gt;</span>
<span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">string</span> <span style="color: #000000">multiset_to_string</span><span style="color: #330033">(</span><span style="color: #990000">const</span> <span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">multiset</span><span style="color: #330033">&lt;</span><span style="color: #000000">K</span><span style="color: #330033">,</span><span style="color: #000000">P</span><span style="color: #330033">&gt;</span><span style="color: #330033">&amp;</span> <span style="color: #000000">values</span><span style="color: #330033">,</span> <span style="color: #990000">const</span> <span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">string</span><span style="color: #330033">&amp;</span> <span style="color: #000000">separator</span><span style="color: #330033">)</span><span style="color: #330033">;</span>

<span style="color: #990000">template</span><span style="color: #330033">&lt;</span><span style="color: #990000">typename</span> <span style="color: #000000">T</span><span style="color: #330033">&gt;</span>
<span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">string</span> <span style="color: #000000">vector_to_string</span><span style="color: #330033">(</span><span style="color: #990000">const</span> <span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">vector</span><span style="color: #330033">&lt;</span><span style="color: #000000">T</span><span style="color: #330033">&gt;</span><span style="color: #330033">&amp;</span> <span style="color: #000000">values</span><span style="color: #330033">,</span> <span style="color: #990000">const</span> <span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">string</span><span style="color: #330033">&amp;</span> <span style="color: #000000">separator</span><span style="color: #330033">)</span><span style="color: #330033">;</span>

<span style="color: #000099">////////////////////////////////////////////////////////////////////////////////</span>
<span style="color: #000099">// Print routines for basic types</span>
<span style="color: #000099">////////////////////////////////////////////////////////////////////////////////</span>

<span style="color: #000099">// The convention is to have a print(str,val) for printing in-line (i.e. the</span>
<span style="color: #000099">// value is on one line) and to have a print(str,val,indent) to print on a whole</span>
<span style="color: #000099">// line, with indent before and newline after.</span>

<span style="color: #000099">// set the number of spaces to indent per indent step (i.e. the number of spaces = indent*indent_step)</span>
<span style="color: #000099">// default is built-in and set to 2</span>
<span style="color: #990000">void</span> <span style="color: #000000">set_indent_step</span><span style="color: #330033">(</span><span style="color: #990000">unsigned</span> <span style="color: #000000">step</span><span style="color: #330033">)</span><span style="color: #330033">;</span>
<span style="color: #990000">unsigned</span> <span style="color: #000000">indent_step</span><span style="color: #330033">(</span><span style="color: #990000">void</span><span style="color: #330033">)</span><span style="color: #330033">;</span>
<span style="color: #000099">// utility for printing the indent, called from within the second form of print</span>
<span style="color: #000000">otext</span><span style="color: #330033">&amp;</span> <span style="color: #000000">print_indent</span><span style="color: #330033">(</span><span style="color: #000000">otext</span><span style="color: #330033">&amp;</span> <span style="color: #000000">str</span><span style="color: #330033">,</span> <span style="color: #990000">unsigned</span> <span style="color: #000000">indent</span><span style="color: #330033">)</span><span style="color: #330033">;</span>

<span style="color: #000099">// print routines for integer types</span>
<span style="color: #000099">// the arguments are as for the to_string</span>

<span style="color: #000000">otext</span><span style="color: #330033">&amp;</span> <span style="color: #000000">print</span><span style="color: #330033">(</span><span style="color: #000000">otext</span><span style="color: #330033">&amp;</span> <span style="color: #000000">str</span><span style="color: #330033">,</span> <span style="color: #990000">const</span> <span style="color: #990000">bool</span><span style="color: #330033">&amp;</span> <span style="color: #000000">value</span><span style="color: #330033">,</span>
             <span style="color: #990000">unsigned</span> <span style="color: #000000">radix</span> <span style="color: #330033">=</span> <span style="color: #993399">10</span><span style="color: #330033">,</span> <span style="color: #000000">radix_display_t</span> <span style="color: #000000">display</span> <span style="color: #330033">=</span> <span style="color: #000000">radix_c_style_or_hash</span><span style="color: #330033">,</span>
             <span style="color: #990000">unsigned</span> <span style="color: #000000">width</span> <span style="color: #330033">=</span> <span style="color: #993399">0</span><span style="color: #330033">)</span>
  <span style="color: #990000">throw</span><span style="color: #330033">(</span><span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">invalid_argument</span><span style="color: #330033">)</span><span style="color: #330033">;</span>

<span style="color: #000000">otext</span><span style="color: #330033">&amp;</span> <span style="color: #000000">print</span><span style="color: #330033">(</span><span style="color: #000000">otext</span><span style="color: #330033">&amp;</span> <span style="color: #000000">str</span><span style="color: #330033">,</span> <span style="color: #990000">const</span> <span style="color: #990000">short</span><span style="color: #330033">&amp;</span> <span style="color: #000000">value</span><span style="color: #330033">,</span>
             <span style="color: #990000">unsigned</span> <span style="color: #000000">radix</span> <span style="color: #330033">=</span> <span style="color: #993399">10</span><span style="color: #330033">,</span> <span style="color: #000000">radix_display_t</span> <span style="color: #000000">display</span> <span style="color: #330033">=</span> <span style="color: #000000">radix_c_style_or_hash</span><span style="color: #330033">,</span>
             <span style="color: #990000">unsigned</span> <span style="color: #000000">width</span> <span style="color: #330033">=</span> <span style="color: #993399">0</span><span style="color: #330033">)</span>
  <span style="color: #990000">throw</span><span style="color: #330033">(</span><span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">invalid_argument</span><span style="color: #330033">)</span><span style="color: #330033">;</span>

<span style="color: #000000">otext</span><span style="color: #330033">&amp;</span> <span style="color: #000000">print</span><span style="color: #330033">(</span><span style="color: #000000">otext</span><span style="color: #330033">&amp;</span> <span style="color: #000000">str</span><span style="color: #330033">,</span> <span style="color: #990000">const</span> <span style="color: #990000">unsigned</span> <span style="color: #990000">short</span><span style="color: #330033">&amp;</span> <span style="color: #000000">value</span><span style="color: #330033">,</span>
             <span style="color: #990000">unsigned</span> <span style="color: #000000">radix</span> <span style="color: #330033">=</span> <span style="color: #993399">10</span><span style="color: #330033">,</span> <span style="color: #000000">radix_display_t</span> <span style="color: #000000">display</span> <span style="color: #330033">=</span> <span style="color: #000000">radix_c_style_or_hash</span><span style="color: #330033">,</span>
             <span style="color: #990000">unsigned</span> <span style="color: #000000">width</span> <span style="color: #330033">=</span> <span style="color: #993399">0</span><span style="color: #330033">)</span>
  <span style="color: #990000">throw</span><span style="color: #330033">(</span><span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">invalid_argument</span><span style="color: #330033">)</span><span style="color: #330033">;</span>

<span style="color: #000000">otext</span><span style="color: #330033">&amp;</span> <span style="color: #000000">print</span><span style="color: #330033">(</span><span style="color: #000000">otext</span><span style="color: #330033">&amp;</span> <span style="color: #000000">str</span><span style="color: #330033">,</span> <span style="color: #990000">const</span> <span style="color: #990000">int</span><span style="color: #330033">&amp;</span> <span style="color: #000000">value</span><span style="color: #330033">,</span>
             <span style="color: #990000">unsigned</span> <span style="color: #000000">radix</span> <span style="color: #330033">=</span> <span style="color: #993399">10</span><span style="color: #330033">,</span> <span style="color: #000000">radix_display_t</span> <span style="color: #000000">display</span> <span style="color: #330033">=</span> <span style="color: #000000">radix_c_style_or_hash</span><span style="color: #330033">,</span>
             <span style="color: #990000">unsigned</span> <span style="color: #000000">width</span> <span style="color: #330033">=</span> <span style="color: #993399">0</span><span style="color: #330033">)</span>
  <span style="color: #990000">throw</span><span style="color: #330033">(</span><span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">invalid_argument</span><span style="color: #330033">)</span><span style="color: #330033">;</span>

<span style="color: #000000">otext</span><span style="color: #330033">&amp;</span> <span style="color: #000000">print</span><span style="color: #330033">(</span><span style="color: #000000">otext</span><span style="color: #330033">&amp;</span> <span style="color: #000000">str</span><span style="color: #330033">,</span> <span style="color: #990000">const</span> <span style="color: #990000">unsigned</span> <span style="color: #990000">int</span><span style="color: #330033">&amp;</span> <span style="color: #000000">value</span><span style="color: #330033">,</span>
             <span style="color: #990000">unsigned</span> <span style="color: #000000">radix</span> <span style="color: #330033">=</span> <span style="color: #993399">10</span><span style="color: #330033">,</span> <span style="color: #000000">radix_display_t</span> <span style="color: #000000">display</span> <span style="color: #330033">=</span> <span style="color: #000000">radix_c_style_or_hash</span><span style="color: #330033">,</span>
             <span style="color: #990000">unsigned</span> <span style="color: #000000">width</span> <span style="color: #330033">=</span> <span style="color: #993399">0</span><span style="color: #330033">)</span>
  <span style="color: #990000">throw</span><span style="color: #330033">(</span><span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">invalid_argument</span><span style="color: #330033">)</span><span style="color: #330033">;</span>

<span style="color: #000000">otext</span><span style="color: #330033">&amp;</span> <span style="color: #000000">print</span><span style="color: #330033">(</span><span style="color: #000000">otext</span><span style="color: #330033">&amp;</span> <span style="color: #000000">str</span><span style="color: #330033">,</span> <span style="color: #990000">const</span> <span style="color: #990000">long</span><span style="color: #330033">&amp;</span> <span style="color: #000000">value</span><span style="color: #330033">,</span>
             <span style="color: #990000">unsigned</span> <span style="color: #000000">radix</span> <span style="color: #330033">=</span> <span style="color: #993399">10</span><span style="color: #330033">,</span> <span style="color: #000000">radix_display_t</span> <span style="color: #000000">display</span> <span style="color: #330033">=</span> <span style="color: #000000">radix_c_style_or_hash</span><span style="color: #330033">,</span>
             <span style="color: #990000">unsigned</span> <span style="color: #000000">width</span> <span style="color: #330033">=</span> <span style="color: #993399">0</span><span style="color: #330033">)</span>
  <span style="color: #990000">throw</span><span style="color: #330033">(</span><span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">invalid_argument</span><span style="color: #330033">)</span><span style="color: #330033">;</span>

<span style="color: #000000">otext</span><span style="color: #330033">&amp;</span> <span style="color: #000000">print</span><span style="color: #330033">(</span><span style="color: #000000">otext</span><span style="color: #330033">&amp;</span> <span style="color: #000000">str</span><span style="color: #330033">,</span> <span style="color: #990000">const</span> <span style="color: #990000">unsigned</span> <span style="color: #990000">long</span><span style="color: #330033">&amp;</span> <span style="color: #000000">value</span><span style="color: #330033">,</span>
             <span style="color: #990000">unsigned</span> <span style="color: #000000">radix</span> <span style="color: #330033">=</span> <span style="color: #993399">10</span><span style="color: #330033">,</span> <span style="color: #000000">radix_display_t</span> <span style="color: #000000">display</span> <span style="color: #330033">=</span> <span style="color: #000000">radix_c_style_or_hash</span><span style="color: #330033">,</span>
             <span style="color: #990000">unsigned</span> <span style="color: #000000">width</span> <span style="color: #330033">=</span> <span style="color: #993399">0</span><span style="color: #330033">)</span>
  <span style="color: #990000">throw</span><span style="color: #330033">(</span><span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">invalid_argument</span><span style="color: #330033">)</span><span style="color: #330033">;</span>

<span style="color: #000000">otext</span><span style="color: #330033">&amp;</span> <span style="color: #000000">print</span><span style="color: #330033">(</span><span style="color: #000000">otext</span><span style="color: #330033">&amp;</span> <span style="color: #000000">str</span><span style="color: #330033">,</span> <span style="color: #990000">const</span> <span style="color: #990000">void</span><span style="color: #330033">*</span><span style="color: #330033">&amp;</span> <span style="color: #000000">value</span><span style="color: #330033">,</span>
             <span style="color: #990000">unsigned</span> <span style="color: #000000">radix</span> <span style="color: #330033">=</span> <span style="color: #993399">10</span><span style="color: #330033">,</span> <span style="color: #000000">radix_display_t</span> <span style="color: #000000">display</span> <span style="color: #330033">=</span> <span style="color: #000000">radix_c_style_or_hash</span><span style="color: #330033">,</span>
             <span style="color: #990000">unsigned</span> <span style="color: #000000">width</span> <span style="color: #330033">=</span> <span style="color: #993399">0</span><span style="color: #330033">)</span>
  <span style="color: #990000">throw</span><span style="color: #330033">(</span><span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">invalid_argument</span><span style="color: #330033">)</span><span style="color: #330033">;</span>

<span style="color: #000099">// print routines for floating-point types</span>

<span style="color: #000000">otext</span><span style="color: #330033">&amp;</span> <span style="color: #000000">print</span><span style="color: #330033">(</span><span style="color: #000000">otext</span><span style="color: #330033">&amp;</span> <span style="color: #000000">str</span><span style="color: #330033">,</span> <span style="color: #990000">float</span> <span style="color: #000000">f</span><span style="color: #330033">,</span>
             <span style="color: #000000">real_display_t</span> <span style="color: #000000">display</span> <span style="color: #330033">=</span> <span style="color: #000000">display_mixed</span><span style="color: #330033">,</span>
             <span style="color: #990000">unsigned</span> <span style="color: #000000">width</span> <span style="color: #330033">=</span> <span style="color: #993399">0</span><span style="color: #330033">,</span> <span style="color: #990000">unsigned</span> <span style="color: #000000">precision</span> <span style="color: #330033">=</span> <span style="color: #993399">6</span><span style="color: #330033">)</span>
  <span style="color: #990000">throw</span><span style="color: #330033">(</span><span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">invalid_argument</span><span style="color: #330033">)</span><span style="color: #330033">;</span>

<span style="color: #000000">otext</span><span style="color: #330033">&amp;</span> <span style="color: #000000">print</span><span style="color: #330033">(</span><span style="color: #000000">otext</span><span style="color: #330033">&amp;</span> <span style="color: #000000">str</span><span style="color: #330033">,</span> <span style="color: #990000">double</span> <span style="color: #000000">f</span><span style="color: #330033">,</span>
             <span style="color: #000000">real_display_t</span> <span style="color: #000000">display</span> <span style="color: #330033">=</span> <span style="color: #000000">display_mixed</span><span style="color: #330033">,</span>
             <span style="color: #990000">unsigned</span> <span style="color: #000000">width</span> <span style="color: #330033">=</span> <span style="color: #993399">0</span><span style="color: #330033">,</span> <span style="color: #990000">unsigned</span> <span style="color: #000000">precision</span> <span style="color: #330033">=</span> <span style="color: #993399">6</span><span style="color: #330033">)</span>
  <span style="color: #990000">throw</span><span style="color: #330033">(</span><span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">invalid_argument</span><span style="color: #330033">)</span><span style="color: #330033">;</span>

<span style="color: #000099">// print routines for string</span>
<span style="color: #000099">// this is needed for completeness, e.g. when calling print_vector on a vector of strings</span>

<span style="color: #000000">otext</span><span style="color: #330033">&amp;</span> <span style="color: #000000">print</span><span style="color: #330033">(</span><span style="color: #000000">otext</span><span style="color: #330033">&amp;</span> <span style="color: #000000">str</span><span style="color: #330033">,</span> <span style="color: #990000">const</span> <span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">string</span><span style="color: #330033">&amp;</span> <span style="color: #000000">value</span><span style="color: #330033">)</span><span style="color: #330033">;</span>
<span style="color: #000000">otext</span><span style="color: #330033">&amp;</span> <span style="color: #000000">print</span><span style="color: #330033">(</span><span style="color: #000000">otext</span><span style="color: #330033">&amp;</span> <span style="color: #000000">str</span><span style="color: #330033">,</span> <span style="color: #990000">const</span> <span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">string</span><span style="color: #330033">&amp;</span> <span style="color: #000000">value</span><span style="color: #330033">,</span> <span style="color: #990000">unsigned</span> <span style="color: #000000">indent</span><span style="color: #330033">)</span><span style="color: #330033">;</span>

<span style="color: #000099">////////////////////////////////////////////////////////////////////////////////</span>
<span style="color: #000099">// template print routines for pointers and STL containers</span>
<span style="color: #000099">////////////////////////////////////////////////////////////////////////////////</span>
<span style="color: #000099">// STLplus containers have these built-in</span>

<span style="color: #990000">template</span> <span style="color: #330033">&lt;</span><span style="color: #990000">typename</span> <span style="color: #000000">T</span><span style="color: #330033">&gt;</span>
<span style="color: #000000">otext</span><span style="color: #330033">&amp;</span> <span style="color: #000000">print_pointer</span><span style="color: #330033">(</span><span style="color: #000000">otext</span><span style="color: #330033">&amp;</span> <span style="color: #000000">str</span><span style="color: #330033">,</span> <span style="color: #990000">const</span> <span style="color: #000000">T</span><span style="color: #330033">*</span> <span style="color: #000000">value</span><span style="color: #330033">,</span>
                     <span style="color: #990000">const</span> <span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">string</span><span style="color: #330033">&amp;</span> <span style="color: #000000">null_string</span><span style="color: #330033">,</span> <span style="color: #990000">const</span> <span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">string</span><span style="color: #330033">&amp;</span> <span style="color: #000000">prefix</span><span style="color: #330033">,</span> <span style="color: #990000">const</span> <span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">string</span><span style="color: #330033">&amp;</span> <span style="color: #000000">suffix</span><span style="color: #330033">)</span><span style="color: #330033">;</span>
<span style="color: #990000">template</span> <span style="color: #330033">&lt;</span><span style="color: #990000">typename</span> <span style="color: #000000">T</span><span style="color: #330033">&gt;</span>
<span style="color: #000000">otext</span><span style="color: #330033">&amp;</span> <span style="color: #000000">print_pointer</span><span style="color: #330033">(</span><span style="color: #000000">otext</span><span style="color: #330033">&amp;</span> <span style="color: #000000">str</span><span style="color: #330033">,</span> <span style="color: #990000">const</span> <span style="color: #000000">T</span><span style="color: #330033">*</span> <span style="color: #000000">value</span><span style="color: #330033">,</span> <span style="color: #990000">unsigned</span> <span style="color: #000000">indent</span><span style="color: #330033">,</span>
                     <span style="color: #990000">const</span> <span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">string</span><span style="color: #330033">&amp;</span> <span style="color: #000000">null_string</span><span style="color: #330033">,</span> <span style="color: #990000">const</span> <span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">string</span><span style="color: #330033">&amp;</span> <span style="color: #000000">prefix</span><span style="color: #330033">,</span> <span style="color: #990000">const</span> <span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">string</span><span style="color: #330033">&amp;</span> <span style="color: #000000">suffix</span><span style="color: #330033">)</span><span style="color: #330033">;</span>

<span style="color: #990000">template</span><span style="color: #330033">&lt;</span><span style="color: #000000">size_t</span> <span style="color: #000000">N</span><span style="color: #330033">&gt;</span>
<span style="color: #000000">otext</span><span style="color: #330033">&amp;</span> <span style="color: #000000">print_bitset</span><span style="color: #330033">(</span><span style="color: #000000">otext</span><span style="color: #330033">&amp;</span> <span style="color: #000000">str</span><span style="color: #330033">,</span> <span style="color: #990000">const</span> <span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">bitset</span><span style="color: #330033">&lt;</span><span style="color: #000000">N</span><span style="color: #330033">&gt;</span><span style="color: #330033">&amp;</span> <span style="color: #000000">value</span><span style="color: #330033">)</span><span style="color: #330033">;</span>
<span style="color: #990000">template</span><span style="color: #330033">&lt;</span><span style="color: #000000">size_t</span> <span style="color: #000000">N</span><span style="color: #330033">&gt;</span>
<span style="color: #000000">otext</span><span style="color: #330033">&amp;</span> <span style="color: #000000">print_bitset</span><span style="color: #330033">(</span><span style="color: #000000">otext</span><span style="color: #330033">&amp;</span> <span style="color: #000000">str</span><span style="color: #330033">,</span> <span style="color: #990000">const</span> <span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">bitset</span><span style="color: #330033">&lt;</span><span style="color: #000000">N</span><span style="color: #330033">&gt;</span><span style="color: #330033">&amp;</span> <span style="color: #000000">value</span><span style="color: #330033">,</span> <span style="color: #990000">unsigned</span> <span style="color: #000000">indent</span><span style="color: #330033">)</span><span style="color: #330033">;</span>

<span style="color: #990000">template</span><span style="color: #330033">&lt;</span><span style="color: #990000">typename</span> <span style="color: #000000">T</span><span style="color: #330033">&gt;</span>
<span style="color: #000000">otext</span><span style="color: #330033">&amp;</span> <span style="color: #000000">print_list</span><span style="color: #330033">(</span><span style="color: #000000">otext</span><span style="color: #330033">&amp;</span> <span style="color: #000000">str</span><span style="color: #330033">,</span> <span style="color: #990000">const</span> <span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">list</span><span style="color: #330033">&lt;</span><span style="color: #000000">T</span><span style="color: #330033">&gt;</span><span style="color: #330033">&amp;</span> <span style="color: #000000">values</span><span style="color: #330033">,</span> <span style="color: #990000">const</span> <span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">string</span><span style="color: #330033">&amp;</span> <span style="color: #000000">separator</span><span style="color: #330033">)</span><span style="color: #330033">;</span>
<span style="color: #990000">template</span><span style="color: #330033">&lt;</span><span style="color: #990000">typename</span> <span style="color: #000000">T</span><span style="color: #330033">&gt;</span>
<span style="color: #000000">otext</span><span style="color: #330033">&amp;</span> <span style="color: #000000">print_list</span><span style="color: #330033">(</span><span style="color: #000000">otext</span><span style="color: #330033">&amp;</span> <span style="color: #000000">str</span><span style="color: #330033">,</span> <span style="color: #990000">const</span> <span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">list</span><span style="color: #330033">&lt;</span><span style="color: #000000">T</span><span style="color: #330033">&gt;</span><span style="color: #330033">&amp;</span> <span style="color: #000000">values</span><span style="color: #330033">,</span> <span style="color: #990000">unsigned</span> <span style="color: #000000">indent</span><span style="color: #330033">)</span><span style="color: #330033">;</span>

<span style="color: #990000">template</span><span style="color: #330033">&lt;</span><span style="color: #990000">typename</span> <span style="color: #000000">L</span><span style="color: #330033">,</span> <span style="color: #990000">typename</span> <span style="color: #000000">R</span><span style="color: #330033">&gt;</span>
<span style="color: #000000">otext</span><span style="color: #330033">&amp;</span> <span style="color: #000000">print_pair</span><span style="color: #330033">(</span><span style="color: #000000">otext</span><span style="color: #330033">&amp;</span> <span style="color: #000000">str</span><span style="color: #330033">,</span> <span style="color: #990000">const</span> <span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">pair</span><span style="color: #330033">&lt;</span><span style="color: #000000">L</span><span style="color: #330033">,</span><span style="color: #000000">R</span><span style="color: #330033">&gt;</span><span style="color: #330033">&amp;</span> <span style="color: #000000">values</span><span style="color: #330033">,</span> <span style="color: #990000">const</span> <span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">string</span><span style="color: #330033">&amp;</span> <span style="color: #000000">separator</span><span style="color: #330033">)</span><span style="color: #330033">;</span>
<span style="color: #990000">template</span><span style="color: #330033">&lt;</span><span style="color: #990000">typename</span> <span style="color: #000000">L</span><span style="color: #330033">,</span> <span style="color: #990000">typename</span> <span style="color: #000000">R</span><span style="color: #330033">&gt;</span>
<span style="color: #000000">otext</span><span style="color: #330033">&amp;</span> <span style="color: #000000">print_pair</span><span style="color: #330033">(</span><span style="color: #000000">otext</span><span style="color: #330033">&amp;</span> <span style="color: #000000">str</span><span style="color: #330033">,</span> <span style="color: #990000">const</span> <span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">pair</span><span style="color: #330033">&lt;</span><span style="color: #000000">L</span><span style="color: #330033">,</span><span style="color: #000000">R</span><span style="color: #330033">&gt;</span><span style="color: #330033">&amp;</span> <span style="color: #000000">values</span><span style="color: #330033">,</span> <span style="color: #990000">const</span> <span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">string</span><span style="color: #330033">&amp;</span> <span style="color: #000000">separator</span><span style="color: #330033">,</span> <span style="color: #990000">unsigned</span> <span style="color: #000000">indent</span><span style="color: #330033">)</span><span style="color: #330033">;</span>

<span style="color: #990000">template</span><span style="color: #330033">&lt;</span><span style="color: #990000">typename</span> <span style="color: #000000">K</span><span style="color: #330033">,</span> <span style="color: #990000">typename</span> <span style="color: #000000">T</span><span style="color: #330033">,</span> <span style="color: #990000">typename</span> <span style="color: #000000">P</span><span style="color: #330033">&gt;</span>
<span style="color: #000000">otext</span><span style="color: #330033">&amp;</span> <span style="color: #000000">print_map</span><span style="color: #330033">(</span><span style="color: #000000">otext</span><span style="color: #330033">&amp;</span> <span style="color: #000000">str</span><span style="color: #330033">,</span> <span style="color: #990000">const</span> <span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">map</span><span style="color: #330033">&lt;</span><span style="color: #000000">K</span><span style="color: #330033">,</span><span style="color: #000000">T</span><span style="color: #330033">,</span><span style="color: #000000">P</span><span style="color: #330033">&gt;</span><span style="color: #330033">&amp;</span> <span style="color: #000000">values</span><span style="color: #330033">,</span> <span style="color: #990000">const</span> <span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">string</span><span style="color: #330033">&amp;</span> <span style="color: #000000">pair_separator</span><span style="color: #330033">,</span> <span style="color: #990000">const</span> <span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">string</span><span style="color: #330033">&amp;</span> <span style="color: #000000">separator</span><span style="color: #330033">)</span><span style="color: #330033">;</span>
<span style="color: #990000">template</span><span style="color: #330033">&lt;</span><span style="color: #990000">typename</span> <span style="color: #000000">K</span><span style="color: #330033">,</span> <span style="color: #990000">typename</span> <span style="color: #000000">T</span><span style="color: #330033">,</span> <span style="color: #990000">typename</span> <span style="color: #000000">P</span><span style="color: #330033">&gt;</span>
<span style="color: #000000">otext</span><span style="color: #330033">&amp;</span> <span style="color: #000000">print_map</span><span style="color: #330033">(</span><span style="color: #000000">otext</span><span style="color: #330033">&amp;</span> <span style="color: #000000">str</span><span style="color: #330033">,</span> <span style="color: #990000">const</span> <span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">map</span><span style="color: #330033">&lt;</span><span style="color: #000000">K</span><span style="color: #330033">,</span><span style="color: #000000">T</span><span style="color: #330033">,</span><span style="color: #000000">P</span><span style="color: #330033">&gt;</span><span style="color: #330033">&amp;</span> <span style="color: #000000">values</span><span style="color: #330033">,</span> <span style="color: #990000">const</span> <span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">string</span><span style="color: #330033">&amp;</span> <span style="color: #000000">pair_separator</span><span style="color: #330033">,</span> <span style="color: #990000">unsigned</span> <span style="color: #000000">indent</span><span style="color: #330033">)</span><span style="color: #330033">;</span>

<span style="color: #990000">template</span><span style="color: #330033">&lt;</span><span style="color: #990000">typename</span> <span style="color: #000000">K</span><span style="color: #330033">,</span> <span style="color: #990000">typename</span> <span style="color: #000000">T</span><span style="color: #330033">,</span> <span style="color: #990000">typename</span> <span style="color: #000000">P</span><span style="color: #330033">&gt;</span>
<span style="color: #000000">otext</span><span style="color: #330033">&amp;</span> <span style="color: #000000">print_multimap</span><span style="color: #330033">(</span><span style="color: #000000">otext</span><span style="color: #330033">&amp;</span> <span style="color: #000000">str</span><span style="color: #330033">,</span> <span style="color: #990000">const</span> <span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">multimap</span><span style="color: #330033">&lt;</span><span style="color: #000000">K</span><span style="color: #330033">,</span><span style="color: #000000">T</span><span style="color: #330033">,</span><span style="color: #000000">P</span><span style="color: #330033">&gt;</span><span style="color: #330033">&amp;</span> <span style="color: #000000">values</span><span style="color: #330033">,</span> <span style="color: #990000">const</span> <span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">string</span><span style="color: #330033">&amp;</span> <span style="color: #000000">pair_separator</span><span style="color: #330033">,</span> <span style="color: #990000">const</span> <span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">string</span><span style="color: #330033">&amp;</span> <span style="color: #000000">separator</span><span style="color: #330033">)</span><span style="color: #330033">;</span>
<span style="color: #990000">template</span><span style="color: #330033">&lt;</span><span style="color: #990000">typename</span> <span style="color: #000000">K</span><span style="color: #330033">,</span> <span style="color: #990000">typename</span> <span style="color: #000000">T</span><span style="color: #330033">,</span> <span style="color: #990000">typename</span> <span style="color: #000000">P</span><span style="color: #330033">&gt;</span>
<span style="color: #000000">otext</span><span style="color: #330033">&amp;</span> <span style="color: #000000">print_multimap</span><span style="color: #330033">(</span><span style="color: #000000">otext</span><span style="color: #330033">&amp;</span> <span style="color: #000000">str</span><span style="color: #330033">,</span> <span style="color: #990000">const</span> <span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">multimap</span><span style="color: #330033">&lt;</span><span style="color: #000000">K</span><span style="color: #330033">,</span><span style="color: #000000">T</span><span style="color: #330033">,</span><span style="color: #000000">P</span><span style="color: #330033">&gt;</span><span style="color: #330033">&amp;</span> <span style="color: #000000">values</span><span style="color: #330033">,</span> <span style="color: #990000">const</span> <span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">string</span><span style="color: #330033">&amp;</span> <span style="color: #000000">pair_separator</span><span style="color: #330033">,</span> <span style="color: #990000">unsigned</span> <span style="color: #000000">indent</span><span style="color: #330033">)</span><span style="color: #330033">;</span>

<span style="color: #990000">template</span><span style="color: #330033">&lt;</span><span style="color: #990000">typename</span> <span style="color: #000000">K</span><span style="color: #330033">,</span> <span style="color: #990000">typename</span> <span style="color: #000000">P</span><span style="color: #330033">&gt;</span>
<span style="color: #000000">otext</span><span style="color: #330033">&amp;</span> <span style="color: #000000">print_set</span><span style="color: #330033">(</span><span style="color: #000000">otext</span><span style="color: #330033">&amp;</span> <span style="color: #000000">str</span><span style="color: #330033">,</span> <span style="color: #990000">const</span> <span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">set</span><span style="color: #330033">&lt;</span><span style="color: #000000">K</span><span style="color: #330033">,</span><span style="color: #000000">P</span><span style="color: #330033">&gt;</span><span style="color: #330033">&amp;</span> <span style="color: #000000">values</span><span style="color: #330033">,</span> <span style="color: #990000">const</span> <span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">string</span><span style="color: #330033">&amp;</span> <span style="color: #000000">separator</span><span style="color: #330033">)</span><span style="color: #330033">;</span>
<span style="color: #990000">template</span><span style="color: #330033">&lt;</span><span style="color: #990000">typename</span> <span style="color: #000000">K</span><span style="color: #330033">,</span> <span style="color: #990000">typename</span> <span style="color: #000000">P</span><span style="color: #330033">&gt;</span>
<span style="color: #000000">otext</span><span style="color: #330033">&amp;</span> <span style="color: #000000">print_set</span><span style="color: #330033">(</span><span style="color: #000000">otext</span><span style="color: #330033">&amp;</span> <span style="color: #000000">str</span><span style="color: #330033">,</span> <span style="color: #990000">const</span> <span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">set</span><span style="color: #330033">&lt;</span><span style="color: #000000">K</span><span style="color: #330033">,</span><span style="color: #000000">P</span><span style="color: #330033">&gt;</span><span style="color: #330033">&amp;</span> <span style="color: #000000">values</span><span style="color: #330033">,</span> <span style="color: #990000">unsigned</span> <span style="color: #000000">indent</span><span style="color: #330033">)</span><span style="color: #330033">;</span>

<span style="color: #990000">template</span><span style="color: #330033">&lt;</span><span style="color: #990000">typename</span> <span style="color: #000000">K</span><span style="color: #330033">,</span> <span style="color: #990000">typename</span> <span style="color: #000000">P</span><span style="color: #330033">&gt;</span>
<span style="color: #000000">otext</span><span style="color: #330033">&amp;</span> <span style="color: #000000">print_multiset</span><span style="color: #330033">(</span><span style="color: #000000">otext</span><span style="color: #330033">&amp;</span> <span style="color: #000000">str</span><span style="color: #330033">,</span> <span style="color: #990000">const</span> <span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">multiset</span><span style="color: #330033">&lt;</span><span style="color: #000000">K</span><span style="color: #330033">,</span><span style="color: #000000">P</span><span style="color: #330033">&gt;</span><span style="color: #330033">&amp;</span> <span style="color: #000000">values</span><span style="color: #330033">,</span> <span style="color: #990000">const</span> <span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">string</span><span style="color: #330033">&amp;</span> <span style="color: #000000">separator</span><span style="color: #330033">)</span><span style="color: #330033">;</span>
<span style="color: #990000">template</span><span style="color: #330033">&lt;</span><span style="color: #990000">typename</span> <span style="color: #000000">K</span><span style="color: #330033">,</span> <span style="color: #990000">typename</span> <span style="color: #000000">P</span><span style="color: #330033">&gt;</span>
<span style="color: #000000">otext</span><span style="color: #330033">&amp;</span> <span style="color: #000000">print_multiset</span><span style="color: #330033">(</span><span style="color: #000000">otext</span><span style="color: #330033">&amp;</span> <span style="color: #000000">str</span><span style="color: #330033">,</span> <span style="color: #990000">const</span> <span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">multiset</span><span style="color: #330033">&lt;</span><span style="color: #000000">K</span><span style="color: #330033">,</span><span style="color: #000000">P</span><span style="color: #330033">&gt;</span><span style="color: #330033">&amp;</span> <span style="color: #000000">values</span><span style="color: #330033">,</span> <span style="color: #990000">unsigned</span> <span style="color: #000000">indent</span><span style="color: #330033">)</span><span style="color: #330033">;</span>

<span style="color: #990000">template</span><span style="color: #330033">&lt;</span><span style="color: #990000">typename</span> <span style="color: #000000">T</span><span style="color: #330033">&gt;</span>
<span style="color: #000000">otext</span><span style="color: #330033">&amp;</span> <span style="color: #000000">print_vector</span><span style="color: #330033">(</span><span style="color: #000000">otext</span><span style="color: #330033">&amp;</span> <span style="color: #000000">str</span><span style="color: #330033">,</span> <span style="color: #990000">const</span> <span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">vector</span><span style="color: #330033">&lt;</span><span style="color: #000000">T</span><span style="color: #330033">&gt;</span><span style="color: #330033">&amp;</span> <span style="color: #000000">values</span><span style="color: #330033">,</span> <span style="color: #990000">const</span> <span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">string</span><span style="color: #330033">&amp;</span> <span style="color: #000000">separator</span><span style="color: #330033">)</span><span style="color: #330033">;</span>
<span style="color: #990000">template</span><span style="color: #330033">&lt;</span><span style="color: #990000">typename</span> <span style="color: #000000">T</span><span style="color: #330033">&gt;</span>
<span style="color: #000000">otext</span><span style="color: #330033">&amp;</span> <span style="color: #000000">print_vector</span><span style="color: #330033">(</span><span style="color: #000000">otext</span><span style="color: #330033">&amp;</span> <span style="color: #000000">str</span><span style="color: #330033">,</span> <span style="color: #990000">const</span> <span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">vector</span><span style="color: #330033">&lt;</span><span style="color: #000000">T</span><span style="color: #330033">&gt;</span><span style="color: #330033">&amp;</span> <span style="color: #000000">values</span><span style="color: #330033">,</span> <span style="color: #990000">unsigned</span> <span style="color: #000000">indent</span><span style="color: #330033">)</span><span style="color: #330033">;</span>

<span style="color: #000099">////////////////////////////////////////////////////////////////////////////////</span>
<span style="color: #000099">// other string manipulations</span>
<span style="color: #000099">////////////////////////////////////////////////////////////////////////////////</span>

<span style="color: #000099">// Padding function allows a string to be printed in a fixed-width field</span>
<span style="color: #000099">// Alignment:</span>
<span style="color: #000099">//   There are three field alignments:</span>
<span style="color: #000099">//     - left aligned - the value is to the left of the field which is padded to the right with spaces</span>
<span style="color: #000099">//     - right aligned - the value is to the right of the field which is padded to the left with spaces</span>
<span style="color: #000099">//     - centred - the value is in the centre of the field and spaces added to both left and right</span>
<span style="color: #000099">// Any other value will cause std::invalid_argument to be thrown</span>

<span style="color: #990000">enum</span> <span style="color: #000000">alignment_t</span>
<span style="color: #330033">{</span>
  <span style="color: #000000">align_left</span><span style="color: #330033">,</span>
  <span style="color: #000000">align_right</span><span style="color: #330033">,</span>
  <span style="color: #000000">align_centre</span>
<span style="color: #330033">}</span><span style="color: #330033">;</span>

<span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">string</span> <span style="color: #000000">pad</span><span style="color: #330033">(</span><span style="color: #990000">const</span> <span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">string</span><span style="color: #330033">&amp;</span> <span style="color: #000000">str</span><span style="color: #330033">,</span> <span style="color: #000000">alignment_t</span> <span style="color: #000000">alignment</span><span style="color: #330033">,</span> <span style="color: #990000">unsigned</span> <span style="color: #000000">width</span><span style="color: #330033">,</span> <span style="color: #990000">char</span> <span style="color: #000000">padch</span> <span style="color: #330033">=</span> <span style="color: #cc9933">' '</span><span style="color: #330033">)</span>
  <span style="color: #990000">throw</span><span style="color: #330033">(</span><span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">invalid_argument</span><span style="color: #330033">)</span><span style="color: #330033">;</span>

<span style="color: #000099">// whitespace trimming</span>
<span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">string</span> <span style="color: #000000">trim_left</span><span style="color: #330033">(</span><span style="color: #990000">const</span> <span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">string</span><span style="color: #330033">&amp;</span> <span style="color: #000000">val</span><span style="color: #330033">)</span><span style="color: #330033">;</span>
<span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">string</span> <span style="color: #000000">trim_right</span><span style="color: #330033">(</span><span style="color: #990000">const</span> <span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">string</span><span style="color: #330033">&amp;</span> <span style="color: #000000">val</span><span style="color: #330033">)</span><span style="color: #330033">;</span>
<span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">string</span> <span style="color: #000000">trim</span><span style="color: #330033">(</span><span style="color: #990000">const</span> <span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">string</span><span style="color: #330033">&amp;</span> <span style="color: #000000">val</span><span style="color: #330033">)</span><span style="color: #330033">;</span>

<span style="color: #000099">// case conversion for std::strings</span>
<span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">string</span> <span style="color: #000000">lowercase</span><span style="color: #330033">(</span><span style="color: #990000">const</span> <span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">string</span><span style="color: #330033">&amp;</span> <span style="color: #000000">val</span><span style="color: #330033">)</span><span style="color: #330033">;</span>
<span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">string</span> <span style="color: #000000">uppercase</span><span style="color: #330033">(</span><span style="color: #990000">const</span> <span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">string</span><span style="color: #330033">&amp;</span> <span style="color: #000000">val</span><span style="color: #330033">)</span><span style="color: #330033">;</span>

<span style="color: #000099">// convert characters represented in from_set to the characters in the same position in to_set</span>
<span style="color: #000099">// for example:</span>
<span style="color: #000099">//   filename = translate(filename, "abcdefghijklmnopqrstuvwxyz", "ABCDEFGHIJKLMNOPQRSTUVWXYZ");</span>
<span style="color: #000099">// converts the filename to uppercase and returns the result (Note that the uppercase function does this more easily).</span>
<span style="color: #000099">// if the from_set is longer than the to_set, then the overlap represents characters to delete (i.e. they map to nothing)</span>
<span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">string</span> <span style="color: #000000">translate</span><span style="color: #330033">(</span><span style="color: #990000">const</span> <span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">string</span><span style="color: #330033">&amp;</span> <span style="color: #000000">input</span><span style="color: #330033">,</span> <span style="color: #990000">const</span> <span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">string</span><span style="color: #330033">&amp;</span> <span style="color: #000000">from_set</span><span style="color: #330033">,</span> <span style="color: #990000">const</span> <span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">string</span><span style="color: #330033">&amp;</span> <span style="color: #000000">to_set</span><span style="color: #330033">)</span><span style="color: #330033">;</span>

<span style="color: #000099">////////////////////////////////////////////////////////////////////////////////</span>
<span style="color: #000099">// wildcard matching</span>
<span style="color: #000099">////////////////////////////////////////////////////////////////////////////////</span>

<span style="color: #000099">// this function does wildcard matching of the wildcard expression against the candidate std::string</span>
<span style="color: #000099">// wildcards are NOT regular expressions</span>
<span style="color: #000099">// the wildcard characters are * and ? where * matches 1 or more characters and ? matches only one</span>
<span style="color: #000099">// there are also character sets [a-z] [qwertyuiop] etc. which match 1 character</span>
<span style="color: #000099">// TODO: character sets like [:alpha:]</span>
<span style="color: #000099">// TODO eventually: regular expression matching and substitution (3rd party library?)</span>

<span style="color: #990000">bool</span> <span style="color: #000000">match_wildcard</span><span style="color: #330033">(</span><span style="color: #990000">const</span> <span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">string</span><span style="color: #330033">&amp;</span> <span style="color: #000000">wild</span><span style="color: #330033">,</span> <span style="color: #990000">const</span> <span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">string</span><span style="color: #330033">&amp;</span> <span style="color: #000000">match</span><span style="color: #330033">)</span><span style="color: #330033">;</span>

<span style="color: #000099">////////////////////////////////////////////////////////////////////////////////</span>
<span style="color: #000099">// Perl-inspired split/join functions</span>
<span style="color: #000099">////////////////////////////////////////////////////////////////////////////////</span>

<span style="color: #000099">// splits the string at every occurance of splitter and adds it as a separate string to the return value</span>
<span style="color: #000099">// the splitter is removed</span>
<span style="color: #000099">// a string with no splitter in it will give a single-vector string</span>
<span style="color: #000099">// an empty string gives an empty vector</span>
<span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">vector</span><span style="color: #330033">&lt;</span><span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">string</span><span style="color: #330033">&gt;</span> <span style="color: #000000">split</span> <span style="color: #330033">(</span><span style="color: #990000">const</span> <span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">string</span><span style="color: #330033">&amp;</span> <span style="color: #000000">str</span><span style="color: #330033">,</span> <span style="color: #990000">const</span> <span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">string</span><span style="color: #330033">&amp;</span> <span style="color: #000000">splitter</span> <span style="color: #330033">=</span> <span style="color: #009900">"\n"</span><span style="color: #330033">)</span><span style="color: #330033">;</span>

<span style="color: #000099">// the reverse of the above</span>
<span style="color: #000099">// joins the string vector to create a single string with the joiner inserted between the joins</span>
<span style="color: #000099">// Note: the joiner will not be added at the beginning or the end</span>
<span style="color: #000099">// However, there are optional fields to add such prefix and suffix strings</span>
<span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">string</span> <span style="color: #000000">join</span> <span style="color: #330033">(</span><span style="color: #990000">const</span> <span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">vector</span><span style="color: #330033">&lt;</span><span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">string</span><span style="color: #330033">&gt;</span><span style="color: #330033">&amp;</span><span style="color: #330033">,</span>
                  <span style="color: #990000">const</span> <span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">string</span><span style="color: #330033">&amp;</span> <span style="color: #000000">joiner</span> <span style="color: #330033">=</span> <span style="color: #009900">"\n"</span><span style="color: #330033">,</span> <span style="color: #990000">const</span> <span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">string</span><span style="color: #330033">&amp;</span> <span style="color: #000000">prefix</span> <span style="color: #330033">=</span> <span style="color: #009900">""</span><span style="color: #330033">,</span> <span style="color: #990000">const</span> <span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">string</span><span style="color: #330033">&amp;</span> <span style="color: #000000">suffix</span> <span style="color: #330033">=</span> <span style="color: #009900">""</span><span style="color: #330033">)</span><span style="color: #330033">;</span>

<span style="color: #000099">////////////////////////////////////////////////////////////////////////////////</span>
<span style="color: #000099">// special displays</span>

<span style="color: #000099">// display the parameter as a number in bytes, kbytes, Mbytes, Gbytes depending on range</span>
<span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">string</span> <span style="color: #000000">display_bytes</span><span style="color: #330033">(</span><span style="color: #990000">long</span> <span style="color: #000000">bytes</span><span style="color: #330033">)</span><span style="color: #330033">;</span>

<span style="color: #000099">// display the parameter in seconds as a string representation in weeks, days, hours, minutes, seconds</span>
<span style="color: #000099">// e.g. "1d 1:01:01" means 1 day, 1 hour, 1 minute and 1 second</span>
<span style="color: #000000">std</span><span style="color: #330033">::</span><span style="color: #000000">string</span> <span style="color: #000000">display_time</span><span style="color: #330033">(</span><span style="color: #990000">unsigned</span> <span style="color: #000000">seconds</span><span style="color: #330033">)</span><span style="color: #330033">;</span>

<span style="color: #000099">////////////////////////////////////////////////////////////////////////////////</span>
<span style="color: #990000">#include</span> <span style="color: #009900">"string_utilities.tpp"</span>
<span style="color: #990000">#endif</span>
</pre>
</body>
</html>
